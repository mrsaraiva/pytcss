<!--suppress PluginXmlValidity -->
<idea-plugin>
    <id>org.msaraiva.pytcss</id>
    <name>Textual CSS Support</name>
    <vendor email="marcos@msaraiva.org" url="https://github.com/mrsaraiva/pytcss">Marcos Saraiva</vendor>

    <description><![CDATA[
    <p>Provides syntax highlighting support for Textual CSS (TCSS) files.</p>
    
    <p>Features:</p>
    <ul>
        <li>Syntax highlighting for .tcss files</li>
        <li>Color previews for literal colors and TCSS variables</li>
        <li>Support for TCSS-specific properties and values</li>
        <li>Support for selectors (type, class, ID, pseudo-class)</li>
        <li>Variable support ($variable syntax)</li>
        <li>Nested rule sets with & nesting selector</li>
    </ul>
    
    <p>Learn more about Textual CSS at <a href="https://textual.textualize.io/guide/CSS/">https://textual.textualize.io/guide/CSS/</a></p>
    ]]></description>

    <change-notes><![CDATA[
    <h3>1.0.0</h3>
    <ul>
        <li>Initial release</li>
        <li>Basic syntax highlighting for .tcss files</li>
        <li>Support for Python inline CSS highlighting</li>
    </ul>
    ]]></change-notes>

    <!-- Product and plugin compatibility -->
    <depends>com.intellij.modules.platform</depends>
    <depends>com.intellij.modules.python</depends>

    <!-- Application services -->
    <extensions defaultExtensionNs="com.intellij">
        <!-- Plugin settings -->
        <applicationService
            serviceImplementation="io.textual.tcss.settings.TcssPluginSettings"/>

        <!-- Settings page -->
        <applicationConfigurable
            parentId="language"
            instance="io.textual.tcss.settings.TcssSettingsConfigurable"
            id="io.textual.tcss.settings"
            displayName="Textual CSS"/>
        <!-- Register .tcss file type -->
        <fileType 
            name="Textual CSS" 
            implementationClass="io.textual.tcss.TcssFileType"
            fieldName="INSTANCE" 
            language="TCSS"
            extensions="tcss"/>
        
        <!-- Register language -->
        <lang.parserDefinition 
            language="TCSS" 
            implementationClass="io.textual.tcss.TcssParserDefinition"/>
        
        <!-- Syntax highlighter -->
        <lang.syntaxHighlighterFactory 
            language="TCSS" 
            implementationClass="io.textual.tcss.TcssSyntaxHighlighterFactory"/>
        
        <!-- Color settings page -->
        <colorSettingsPage
            implementation="io.textual.tcss.TcssColorSettingsPage"/>

        <!-- Add icon for .tcss files -->
        <iconProvider implementation="io.textual.tcss.TcssIconProvider"/>

        <!-- Color preview and picker -->
        <colorProvider implementation="io.textual.tcss.TcssColorProvider"/>

        <!-- Line marker for 'auto' keyword -->
        <codeInsight.lineMarkerProvider
            language="TCSS"
            implementationClass="io.textual.tcss.TcssAutoKeywordLineMarker"/>

        <!-- Python CSS/DEFAULT_CSS injection -->
        <multiHostInjector implementation="io.textual.tcss.python.PythonTcssLanguageInjector"/>

        <!-- Completion contributor -->
        <completion.contributor
            language="TCSS"
            implementationClass="io.textual.tcss.completion.TcssCompletionContributor"/>

        <!-- Structure view -->
        <lang.psiStructureViewFactory
            language="TCSS"
            implementationClass="io.textual.tcss.structure.TcssStructureViewFactory"/>

        <!-- Documentation provider -->
        <lang.documentationProvider
            language="TCSS"
            implementationClass="io.textual.tcss.documentation.TcssDocumentationProvider"/>

        <!-- Live template context -->
        <liveTemplateContext implementation="io.textual.tcss.templates.TcssTemplateContextType"/>

        <!-- Live templates -->
        <defaultLiveTemplates file="liveTemplates/tcss"/>

        <!-- Validation annotator -->
        <annotator
            language="TCSS"
            implementationClass="io.textual.tcss.validation.TcssAnnotator"/>

        <!-- Variable rename processor -->
        <renamePsiElementProcessor implementation="io.textual.tcss.refactoring.TcssVariableRenameProcessor"/>

        <!-- Variable index for cross-file resolution -->
        <fileBasedIndex implementation="io.textual.tcss.index.TcssVariableIndex"/>

        <!-- Duplicate variable inspection -->
        <localInspection
            language="TCSS"
            displayName="Duplicate variable declaration"
            groupName="TCSS"
            enabledByDefault="true"
            level="WARNING"
            implementationClass="io.textual.tcss.inspection.TcssDuplicateVariableInspection"/>
    </extensions>

    <actions>
        <!-- Add actions here if needed -->
    </actions>
</idea-plugin>
